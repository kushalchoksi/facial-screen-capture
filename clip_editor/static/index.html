<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clip Editor</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app">
        <!-- Header -->
        <header class="header">
            <h1>Clip Editor</h1>
            <div class="header-controls">
                <button id="btn-load" class="btn btn-primary">Load Video</button>
                <span id="status-text" class="status-text"></span>
            </div>
        </header>

        <!-- Load Modal -->
        <div id="load-modal" class="modal hidden">
            <div class="modal-content">
                <h2>Load Video</h2>
                <div class="form-group">
                    <label for="video-path">Video Path:</label>
                    <input type="text" id="video-path" placeholder="/path/to/video.mp4">
                </div>
                <div class="form-group">
                    <label for="reference-path">Reference Images Folder:</label>
                    <input type="text" id="reference-path" placeholder="/path/to/reference_images">
                </div>
                <div class="form-group">
                    <label for="clip-padding">Clip Padding (seconds):</label>
                    <input type="number" id="clip-padding" value="2.0" step="0.5" min="0">
                </div>
                <div class="modal-actions">
                    <button id="btn-cancel-load" class="btn">Cancel</button>
                    <button id="btn-confirm-load" class="btn btn-primary">Load</button>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Video Player -->
            <div class="video-section">
                <div class="video-container">
                    <video id="video-player" class="video-player">
                        <source src="" type="video/mp4">
                    </video>
                    <div id="video-placeholder" class="video-placeholder">
                        <p>Load a video to begin</p>
                    </div>
                </div>

                <!-- Video Controls -->
                <div class="video-controls">
                    <div class="controls-left">
                        <button id="btn-prev-frame" class="btn-icon" title="Previous frame (Left Arrow)">
                            <svg viewBox="0 0 24 24" width="20" height="20"><path fill="currentColor" d="M6 6h2v12H6V6zm3.5 6l8.5 6V6l-8.5 6z"/></svg>
                        </button>
                        <button id="btn-play" class="btn-icon btn-play" title="Play/Pause (Space)">
                            <svg id="icon-play" viewBox="0 0 24 24" width="24" height="24"><path fill="currentColor" d="M8 5v14l11-7z"/></svg>
                            <svg id="icon-pause" viewBox="0 0 24 24" width="24" height="24" class="hidden"><path fill="currentColor" d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
                        </button>
                        <button id="btn-next-frame" class="btn-icon" title="Next frame (Right Arrow)">
                            <svg viewBox="0 0 24 24" width="20" height="20"><path fill="currentColor" d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/></svg>
                        </button>
                    </div>
                    <div class="controls-center">
                        <span id="time-current">00:00:00</span>
                        <span class="time-separator">/</span>
                        <span id="time-duration">00:00:00</span>
                    </div>
                    <div class="controls-right">
                        <span id="fps-display" class="fps-display">-- fps</span>
                    </div>
                </div>

                <!-- Timeline -->
                <div class="timeline-container">
                    <canvas id="timeline-canvas" class="timeline-canvas"></canvas>
                    <div id="playhead" class="playhead"></div>
                </div>

                <!-- Progress Bar (for detection) -->
                <div id="progress-container" class="progress-container hidden">
                    <div class="progress-bar">
                        <div id="progress-fill" class="progress-fill"></div>
                    </div>
                    <span id="progress-text" class="progress-text">Loading...</span>
                </div>
            </div>

            <!-- Clips Panel -->
            <div class="clips-section">
                <div class="clips-header">
                    <h2>Detected Clips</h2>
                    <div class="clips-actions">
                        <button id="btn-select-all" class="btn btn-sm">Select All</button>
                        <button id="btn-deselect-all" class="btn btn-sm">Deselect All</button>
                    </div>
                </div>
                <div id="clips-list" class="clips-list">
                    <p class="clips-empty">No clips detected yet</p>
                </div>
                <div class="clips-footer">
                    <button id="btn-add-clip" class="btn" disabled>Add Manual Clip</button>
                    <button id="btn-export" class="btn btn-primary" disabled>Export Selected</button>
                </div>
            </div>
        </main>

        <!-- Keyboard Shortcuts Help -->
        <div class="shortcuts-help">
            <strong>Shortcuts:</strong>
            Space: Play/Pause |
            Left/Right: Frame step |
            J/L: Seek 5s |
            Home/End: Start/End
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
